{% extends "base.html" %}
{% block content %}
<h2>{% if appointment %}Edit Appointment{% else %}Schedule Appointment{% endif %}</h2>
<form method="post">
  <div class="mb-3">
    <label class="form-label">Patient</label>
    <select class="form-select" name="patient_id" required>
      <option value="">Choose patient</option>
      {% for p in patients %}
        <option value="{{ p.patient_id }}" {% if appointment and appointment.patient_id==p.patient_id %}selected{% endif %}>{{ p.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Doctor</label>
    <select class="form-select" name="doctor_id" required>
      <option value="">Choose doctor</option>
      {% for d in doctors %}
        <option value="{{ d.doctor_id }}" {% if appointment and appointment.doctor_id==d.doctor_id %}selected{% endif %}>{{ d.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Date</label>
    <input class="form-control" type="date" name="appointment_date" required value="{{ appointment.appointment_date if appointment }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Notes</label>
    <textarea class="form-control" name="notes">{{ appointment.notes if appointment }}</textarea>
  </div>
  <button class="btn btn-primary" type="submit">Save</button>
  <a class="btn btn-secondary" href="{{ url_for('appointments') }}">Cancel</a>
</form>
{% endblock %}
